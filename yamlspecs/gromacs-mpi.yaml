!include gromacs.yaml
---
- package: gromacs-mpi
  baserpm: "{{name}}_{{version}}_{{compiler}}_{{compiler_version}}_{{mpi}}_{{mpi_version}}"
  root: "{{pkg_defaults.app_path}}/{{name}}/{{version}}/{{compiler}}/{{compiler_version}}/{{mpi}}/{{mpi_version}}"
  mpi: "{{versions.mpi.name}}"
  mpi_version: "{{versions.mpi.version}}"
  build:
    modules:
      - foundation
      - "{{compiler}}/{{compiler_version}}"
      - "{{mpi}}/{{mpi_version}}/{{compiler}}.{{compiler_version}}"
    cmake_args: -DGMX_BUILD_OWN_FFTW=ON -DGMX_MPI=ON -DGMX_BUILD_MDRUN_ONLY=ON -DCMAKE_INSTALL_PREFIX={{root}}
  requires:
    - "{{compiler}}_{{compiler_version}}"
    - "{{mpi}}_{{mpi_version}}_{{compiler}}_{{compiler_version}}"
