# Builds the module for namd 
!include namd-cuda.yaml
!include rcic-module.yaml
---
- package: "{{name}} module"
  pkgname: "{{baserpm}}_cuda_{{versions.cuda}}-module" 
  category: CHEMISTRY

  # looks just like an MPI module, except cuds
  mpi: cuda
  mpi_version: "{{versions.cuda}}"
  module:
    <<: *ModuleCompilerMpi

    prepend_path: 
      - PATH {{root}}/{{dest_arch}}
    prereq:
      - *ModuleCompilerMpi_prereq
      - charm/{{versions.charm}}
      - mkl/{{versions.mkl}}
    requires:
      - *ModuleCompilerMpi_requires
      - charm_{{versions.charm}}_{{compiler}}_{{compiler_version}}-module
      - mkl_{{versions.mkl}}-module
